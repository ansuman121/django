{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <style>#search-results .active {
            background-color: #007bff;
            color: white;
    }
    </style>
  </head>
  <body>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show mb-0" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}

    <nav class="navbar navbar-expand-lg bg-dark " data-bs-theme="dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Icoder</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="{% url 'home' %}">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'about' %}">About</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  blogs
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">Technology</a></li>
                  <li><a class="dropdown-item" href="#">web development</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="{% url 'show_blogs' %}">all blogs</a></li>
                  <li><a class="dropdown-item" href="{% url 'write_blog' loc='home' %}">Write for us</a></li>
    
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'contact' %}">Contact Us</a>
              </li>
            </ul>
            <div class="mx-2">
              {% if request.session.user_id %}
                  <a class="btn btn-outline-danger" href="{% url 'logout' %}">Signout</a>
              {% else %}
                  <button class="btn btn-outline-danger" type="button" data-bs-toggle="modal" data-bs-target="#loginModal">Login</button>
                  <button class="btn btn-outline-danger mx-2" type="button" data-bs-toggle="modal" data-bs-target="#signupModal">Signup</button>
              {% endif %}
            </div>
            <form class="d-flex position-relative" role="search" onsubmit="return false;">
            <input id="blog-search" class="form-control me-2" type="search" placeholder="Search blog by title..." aria-label="Search" autocomplete="off" />
            <button class="btn btn-outline-light" type="submit">Search</button>
            <div id="search-results" class="list-group position-absolute w-100 mt-5 z-3"></div>
            </form>
            
          </div>
        </div>
      </nav>
      <div id="carouselExampleCaptions" class="carousel slide carousel-fade" data-bs-ride="carousel">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
            aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
            aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
            aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="{% static 'images/1.jpg' %}" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Welcome to icoder</h5>
              <p>Technology News,Development and Trends</p>
              <button class="btn btn-danger">Technology</button>
              <button class="btn btn-primary">Web Development</button>
              <button class="btn btn-success">Tech Fun</button>
            </div>
          </div>
          <div class="carousel-item">
            <img src="{% static 'images/2.jpg' %}" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Best coding blog</h5>
              <p>Technology News,Development and Trends</p>
              <button class="btn btn-danger">Technology</button>
              <button class="btn btn-primary">Web Development</button>
              <button class="btn btn-success">Tech Fun</button>
            </div>
          </div>
          <div class="carousel-item">
            <img src="{% static 'images/3.jpg' %}" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Award winning blog</h5>
              <p>Technology News,Development and Trends</p>
              <button class="btn btn-danger">Technology</button>
              <button class="btn btn-primary">Web Development</button>
              <button class="btn btn-success">Tech Fun</button>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <div class="container py-4">
        <div class="row row-cols-1 row-cols-md-2 g-4">
    
          <!-- CARD 1 -->
          <div class="col">
            <div class="border rounded overflow-hidden d-flex flex-md-row shadow-sm h-100">
              <div class="p-4 d-flex flex-column justify-content-between flex-grow-1">
                <div>
                  <strong class="d-inline-block mb-2 text-primary-emphasis">Development</strong>
                  <h3 class="mb-0">Mastering Full-Stack Web Dev</h3>
                  <div class="mb-1 text-body-secondary">June 14, 2025</div> <br>
                  <p>Explore the complete journey from front-end to back-end. Learn how full-stack developers bring ideas to life with tools like React, Node.js, and databases.</p>
                </div>
                <a href="{% url 'example_blog'%}" class="icon-link gap-1 icon-link-hover mt-3">Continue reading</a>
              </div>
              <div class="d-none d-lg-block">
                <img src="{% static 'images/thumb1.jpg' %}" alt="..." class="img-fluid" style="height: 100%; max-width: 200px; object-fit: cover;">
              </div>
            </div>
          </div>
    
          <!-- CARD 2 -->
          <div class="col">
            <div class="border rounded overflow-hidden d-flex flex-md-row shadow-sm h-100">
              <div class="p-4 d-flex flex-column justify-content-between flex-grow-1">
                <div>
                  <strong class="d-inline-block mb-2 text-primary-emphasis">UI/UX</strong>
                  <h3 class="mb-0">Designing User-Centric Interfaces</h3>
                  <div class="mb-1 text-body-secondary">June 10, 2025</div> <br>
                  <p>Learn how intuitive design principles and accessibility can elevate your applications. Design isn’t just about looks — it’s about experience.</p>
                </div>
                <a href="{% url 'example_blog'%}" class="icon-link gap-1 icon-link-hover  mt-3">Continue reading</a>
              </div>
              <div class="d-none d-lg-block">
                <img src="{% static 'images/thumb2.jpg' %}" alt="..." class="img-fluid" style="height: 100%; max-width: 200px; object-fit: cover;">
              </div>
            </div>
          </div>
    
          <!-- CARD 3 -->
          <div class="col">
            <div class="border rounded overflow-hidden d-flex flex-md-row shadow-sm h-100">
              <div class="p-4 d-flex flex-column justify-content-between flex-grow-1">
                <div>
                  <strong class="d-inline-block mb-2 text-primary-emphasis">Trending</strong>
                  <h3 class="mb-0">AI Tools for Coders</h3>
                  <div class="mb-1 text-body-secondary">June 5, 2025</div> <br>
                  <p>Discover the best AI tools that are revolutionizing the way developers code, debug, and deploy faster than ever before.</p>
                </div>
                <a href="{% url 'example_blog'%}" class="icon-link gap-1 icon-link-hover mt-3">Continue reading</a>
              </div>
              <div class="d-none d-lg-block">
                <img src="{% static 'images/thumb3.jpg' %}" alt="..." class="img-fluid" style="height: 100%; max-width: 200px; object-fit: cover;">
              </div>
            </div>
          </div>
    
          <!-- CARD 4 -->
          <div class="col">
            <div class="border rounded overflow-hidden d-flex flex-md-row shadow-sm h-100">
              <div class="p-4 d-flex flex-column justify-content-between flex-grow-1 h-100">
                <div>
                  <strong class="d-inline-block mb-2 text-primary-emphasis">Community</strong>
                  <h3 class="mb-0">Top Coding Events 2025</h3>
                  <div class="mb-1 text-body-secondary">May 30, 2025</div> <br>
                  <p>Don’t miss the top global hackathons, tech conferences, and coding bootcamps that every developer should attend this year.</p>
                </div>
                <a href="{% url 'example_blog'%}" class="icon-link gap-1 icon-link-hover mt-3">Continue reading</a>
              </div>
              <div class="d-none d-lg-block">
                <img src="{% static 'images/felipe-furtado-2zDXqgTzEFE-unsplash.jpg' %}" alt="..." class="img-fluid"
                  style="height: 100%; max-width: 200px; object-fit: cover;">
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="signupLabel">Login to your Account</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body ">
          <form method="POST" action="{% url 'user_login' loc='home' %}">
            {% csrf_token %}
            <div class="row mb-3 my-4">
              <label for="inputEmail3" class="col-sm-2 col-form-label">Email</label>
              <div class="col-sm-10">
                <input type="email" class="form-control" id="inputEmail3" name = 'l_email'>
              </div>
              
            </div>
            <div class="row mb-3 my-4">
              <label for="inputPassword3" class="col-sm-2 col-form-label">Password</label>
              <div class="col-sm-10">
                <input type="password" class="form-control" id="inputPassword3" name = 'l_pass'>
              </div>
            </div>
            
            <div class="row mb-3 my-4">
              <div class="col-sm-4 ">
                confirm your Login
                </div>
              <div class="col-sm-8 ">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="gridCheck1" name = "l_confirm">
                  <label class="form-check-label" for="gridCheck1" >
                    yes
                  </label>
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-primary">Log in</button>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  
  
  <!--signup Modal -->
  <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="signupModalLabel">Register an Account</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form method="POST" action="{% url 'signup' loc='home' %}">
            {% csrf_token %}
            <div class="row mb-3 my-4">
              <label for="inputEmail3" class="col-sm-5 col-form-label">Enter your Name</label>
              <div class="col-sm-7">
                <input type="text" class="form-control" id="inputEmail3" name = 'name'>
              </div>
              
            </div>
            <div class="row mb-3 my-4">
              <label for="inputEmail3" class="col-sm-5 col-form-label">Enter your Email</label>
              <div class="col-sm-7">
                <input type="email" class="form-control" id="inputEmail3" name = 'email'>
              </div>
              
            </div>
            <div class="row mb-3 my-4 ">
              <label for="inputPassword3" class="col-sm-5 col-form-label">Enter Your Password</label>
              <div class="col-sm-7">
                <input type="password" class="form-control" id="inputPassword3" name = 'password'>
              </div>
            </div>
            <div class="row mb-3 my-4">
              <label for="inputPassword3" class="col-sm-5 col-form-label">Confirm your Entered Password</label>
              <div class="col-sm-7">
                <input type="password" class="form-control" id="inputPassword3" name = 'confirm_password'>
              </div>
            </div>
            
            <div class="row mb-3 my-4">
              <div class="col-sm-5 ">
                confirm to Create your account
                </div>
              <div class="col-sm-7 ">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="gridCheck1" name = 'confirm'>
                  <label class="form-check-label" for="gridCheck1">
                    yes
                  </label>
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-primary my-4">Create Account</button>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          
        </div>
      </div>
    </div>
  </div>

      <hr class="featurette-divider">

      <footer class="container">
        <p class="float-end"><a href="#">Back to top</a></p>
        <p>© 2021–2025 Company, Inc. · <a href="#">Privacy</a> · <a href="#">Terms</a></p>
      </footer>
      <script>
    document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.getElementById("blog-search");
    const resultsBox = document.getElementById("search-results");
    let selectedIndex = -1;

    searchInput.addEventListener("keyup", (e) => {
        const query = searchInput.value.trim();
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            handleKeyNavigation(e);
            return;
        }

        selectedIndex = -1;
        resultsBox.innerHTML = "";

        if (query.length > 0) {
            fetch(`/search/?q=${query}`)
                .then(res => res.json())
                .then(data => {
                    resultsBox.innerHTML = "";
                    if (data.length > 0) {
                        data.forEach((blog) => {
                            const item = document.createElement("a");
                            item.href = `/blog_details/${blog.id}/`; 
                            item.className = "list-group-item list-group-item-action";
                            item.textContent = blog.title;
                            resultsBox.appendChild(item);
                        });
                    } else {
                        const noResult = document.createElement("div");
                        noResult.className = "list-group-item";
                        noResult.textContent = "No blog found.";
                        resultsBox.appendChild(noResult);
                    }
                });
        }
    });

    // Click outside to hide
    document.addEventListener("click", (e) => {
        if (!resultsBox.contains(e.target) && e.target !== searchInput) {
            resultsBox.innerHTML = "";
        }
    });

    // Arrow key + enter handling
    function handleKeyNavigation(e) {
        const items = resultsBox.querySelectorAll("a");
        if (items.length === 0) return;

        if (e.key === "ArrowDown") {
            selectedIndex = (selectedIndex + 1) % items.length;
        } else if (e.key === "ArrowUp") {
            selectedIndex = (selectedIndex - 1 + items.length) % items.length;
        } else if (e.key === "Enter") {
            if (selectedIndex >= 0) {
                window.location.href = items[selectedIndex].href;
            }
            return;
        }

        items.forEach(item => item.classList.remove("active"));
        if (selectedIndex >= 0) {
            items[selectedIndex].classList.add("active");
        }
    }
});
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
  </body>
</html>